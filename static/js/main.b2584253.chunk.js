(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){},8:function(e,t,n){e.exports=n(9)},9:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(2),o=n(4),s=n(3),i=n(5),l=n(0),c=n.n(l),u=n(7),h=n.n(u),v=(n(15),["white","red","green","blue","cyan","magenta","yellow"]);function p(e,t){return t<0||t>=e.length}function m(e){return c.a.createElement("button",{className:"square",style:{background:v[e.value]}})}var f=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"renderSquare",value:function(e){return c.a.createElement(m,{value:e})}},{key:"renderRow",value:function(e){var t=this;return c.a.createElement("div",{className:"board-row"},e.map(function(e){return t.renderSquare(e)}))}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,this.props.rows.map(function(t){return e.renderRow(t)}))}}]),t}(c.a.Component),k=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={loop:!1,rows:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],tetris:{blocks:[],value:0}},n}return Object(i.a)(t,e),Object(r.a)(t,[{key:"startLoop",value:function(){for(var e=this,t=this.state.rows,n=0;n<t.length;++n)for(var a=0;a<t[n].length;++a)t[n][a]=0;this.setState({rows:t}),this.gameLoop=setInterval(function(){return e.tick()},10)}},{key:"componentDidMount",value:function(){this.setState({loop:!0}),this.startLoop()}},{key:"endLoop",value:function(){this.setState({loop:!1}),clearInterval(this.gameLoop)}},{key:"componentWillUnmount",value:function(){this.endLoop()}},{key:"onNewGame",value:function(){this.loop&&this.endLoop(),this.startLoop()}},{key:"applyTetris",value:function(e,t,n){for(var a=0;a<t.length;++a)e[t[a][0]][t[a][1]]=n}},{key:"isEmpty",value:function(e,t,n){return 0===e[t][n]}},{key:"canMove",value:function(e,t,n,a){for(var r=0;r<t.length;++r)if(p(e,t[r][0]+n)||p(e[t[r][0]+n],t[r][1]+a)||!this.isEmpty(e,t[r][0]+n,t[r][1]+a))return!1;return!0}},{key:"moveTetris",value:function(e,t){var n=this.state.rows.slice(),a=Object.assign({},this.state.tetris);if(this.canMove(n,a.blocks,e,t)){this.applyTetris(n,a.blocks,0);for(var r=0;r<a.blocks.length;++r)a.blocks[r][0]+=e,a.blocks[r][1]+=t;return this.applyTetris(n,a.blocks,a.value),this.setState({rows:n,tetris:a}),!0}return!1}},{key:"spawnTetris",value:function(){var e,t,n={blocks:[[0,3],[0,4],[0,5],[0,6]],value:(e=1,t=v.length,Math.floor(Math.random()*(t-e))+e)},a=this.state.rows.slice();this.canMove(a,n.blocks,0,0)?(this.applyTetris(a,n.blocks,n.value),this.setState({rows:a,tetris:n})):this.endLoop()}},{key:"tick",value:function(){0===this.state.tetris.blocks.length?this.spawnTetris():this.moveTetris(1,0)||this.spawnTetris()}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"game"},c.a.createElement("div",{className:"game-board"},c.a.createElement(f,{rows:this.state.rows}),c.a.createElement("button",{onClick:function(){return e.onNewGame()}},"New Game")),c.a.createElement("div",{className:"game-info"},c.a.createElement("div",null),c.a.createElement("ol",null)))}}]),t}(c.a.Component);h.a.render(c.a.createElement(k,null),document.getElementById("root"))}},[[8,1,2]]]);
//# sourceMappingURL=main.b2584253.chunk.js.map